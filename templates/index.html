<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI SENTINEL Deepfake Detection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
    * { box-sizing: border-box; }
    body {
        margin: 0;
        min-height: 100vh;
        color: #ffffff;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        overflow-x: hidden;
        position: relative;
    }

    /* Full-page live background canvas */
    #bgCanvas {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        display: block;
    }

    .bg-overlay {
        position: fixed;
        inset: 0;
        z-index: -1;
        pointer-events: none;
        background-image:
            linear-gradient(rgba(0, 212, 255, 0.04) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 212, 255, 0.04) 1px, transparent 1px);
        background-size: 50px 50px;
        animation: gridPulse 3s ease-in-out infinite;
    }
    @keyframes gridPulse {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
    }

    /* Live hero visual – futuristic */
    .live-ai-wrap {
        position: relative;
        margin: 2rem auto;
        width: min(92%, 560px);
        aspect-ratio: 1;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .live-ai-wrap::before {
        content: '';
        position: absolute;
        inset: -4px;
        border-radius: 28px;
        padding: 2px;
        background: linear-gradient(135deg, rgba(0, 212, 255, 0.6), rgba(168, 85, 247, 0.5), rgba(236, 72, 153, 0.4), rgba(0, 212, 255, 0.6));
        background-size: 300% 300%;
        animation: borderFlow 6s ease infinite;
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
    }
    @keyframes borderFlow {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    .live-ai-canvas {
        width: 100%;
        height: 100%;
        display: block;
        border-radius: 24px;
        box-shadow: 0 0 80px rgba(0, 212, 255, 0.35), 0 0 140px rgba(168, 85, 247, 0.2), inset 0 0 60px rgba(0, 212, 255, 0.06);
        background: radial-gradient(ellipse 80% 80% at 50% 50%, rgba(15, 15, 35, 0.98), rgba(8, 6, 20, 0.99));
        border: 1px solid rgba(0, 212, 255, 0.2);
    }

    /* Stylish result card */
    .result-card {
        animation: resultPop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        opacity: 0;
        transform: scale(0.9) translateY(10px);
    }
    @keyframes resultPop {
        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }
    .result-card.real {
        --result-accent: #22c55e;
        --result-glow: rgba(34, 197, 94, 0.4);
        --result-bg: rgba(22, 101, 52, 0.4);
        --result-border: rgba(34, 197, 94, 0.5);
    }
    .result-card.fake {
        --result-accent: #f43f5e;
        --result-glow: rgba(244, 63, 94, 0.4);
        --result-bg: rgba(127, 29, 29, 0.4);
        --result-border: rgba(244, 63, 94, 0.5);
    }
    .result-card-inner {
        position: relative;
        border: 1px solid var(--result-border);
        background: var(--result-bg);
        box-shadow: 0 0 30px var(--result-glow), inset 0 1px 0 rgba(255,255,255,0.08);
    }
    .result-icon-wrap {
        animation: iconPulse 2s ease-in-out infinite;
    }
    @keyframes iconPulse {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.05); opacity: 0.9; }
    }
    .confidence-bar-track {
        background: rgba(0,0,0,0.3);
        border-radius: 9999px;
        overflow: hidden;
    }
    .confidence-bar-fill {
        height: 100%;
        border-radius: 9999px;
        transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        background: linear-gradient(90deg, var(--result-accent), rgba(255,255,255,0.9));
        box-shadow: 0 0 12px var(--result-glow);
    }
</style>

</head>
<body class="text-white min-h-screen flex flex-col">

    <canvas id="bgCanvas" aria-hidden="true"></canvas>
    <div class="bg-overlay" aria-hidden="true"></div>

    <!-- Header -->
    <header class="bg-gray-800/80 backdrop-blur-md shadow-md border-b border-cyan-500/20">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-black tracking-tight">Deepfake Detector</h1>
            <nav class="space-x-6">
                <a href="/" class="hover:text-cyan-400 transition-colors font-semibold">Home</a>
                <a href="#realtime" class="hover:text-cyan-400 transition-colors font-semibold">Real-Time</a>
            </nav>
        </div>
    </header>

    <!-- Landing Page Section -->
    <section class="container mx-auto px-6 py-16 text-center relative">
        <h2 class="text-4xl md:text-5xl font-black tracking-tight text-cyan-400">Uncover the Truth with AI</h2>
        <p class="mt-4 text-gray-300 max-w-2xl mx-auto text-lg">
            Our Deepfake Detection System ensures you can trust the videos you see online.
            Upload your video and get fast, accurate results with AI-based deepfake detection.
        </p>

        <!-- Live deepfake-detection visual -->
        <div class="live-ai-wrap">
            <canvas id="liveCanvas" class="live-ai-canvas"></canvas>
        </div>
    </section>

    <!-- Upload Form Section -->
    <section id="realtime" class="container mx-auto px-6 py-10">
        <div class="bg-gray-800/80 backdrop-blur-md p-6 rounded-xl shadow-lg max-w-lg mx-auto border border-cyan-500/20">
            <h3 class="text-2xl md:text-3xl font-black text-center mb-4 text-cyan-400 tracking-tight">Upload Video for Detection</h3>

            <form method="POST" action="/Detect" enctype="multipart/form-data" class="space-y-4" onsubmit="showLoading()">
                <input
                    type="file"
                    id="videoUpload"
                    name="video"
                    accept="video/*"
                    required
                    class="w-full p-2 border border-gray-600 bg-gray-700/80 rounded-lg text-white focus:ring-2 focus:ring-cyan-500"
                >

                <button
                    type="submit"
                    class="w-full bg-cyan-500 hover:bg-cyan-400 text-gray-900 font-semibold py-2 px-4 rounded-lg transition-colors"
                >
                    Detect Deepfake
                </button>
            </form>

            <div id="loading" class="mt-4 text-center text-cyan-300 font-medium hidden">
                Processing... Please wait.
            </div>

            {% if data %}
            <div class="result-card mt-6 rounded-2xl overflow-hidden {{ 'real' if data.output == 'REAL' else 'fake' }}">
                <div class="result-card-inner p-6 rounded-2xl">
                    <div class="flex flex-col items-center gap-4">
                        <div class="result-icon-wrap w-16 h-16 rounded-full flex items-center justify-center flex-shrink-0"
                             style="background: rgba(0,0,0,0.25); border: 2px solid var(--result-accent);">
                            {% if data.output == 'REAL' %}
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" style="color: var(--result-accent);"><path d="M20 6L9 17l-5-5"/></svg>
                            {% else %}
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24" style="color: var(--result-accent);"><path d="M18 6L6 18M6 6l12 12"/></svg>
                            {% endif %}
                        </div>
                        <div class="text-center">
                            <p class="text-sm font-bold uppercase tracking-widest opacity-80 mb-1">Detection Result</p>
                            <h2 class="text-2xl md:text-3xl font-black tracking-tight" style="color: var(--result-accent);">{{ data.output }}</h2>
                        </div>
                        <div class="w-full max-w-xs">
                            <div class="flex justify-between text-sm font-semibold mb-2">
                                <span class="opacity-80">Confidence</span>
                                <span style="color: var(--result-accent);">{{ data.confidence }}%</span>
                            </div>
                            <div class="confidence-bar-track h-2.5 w-full">
                                <div class="confidence-bar-fill" data-confidence="{{ data.confidence }}" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- Footer -->
    <footer class="mt-auto bg-gray-800/80 backdrop-blur-md border-t border-cyan-500/20 text-center py-4">
        <p class="text-white font-semibold">&copy; 2025 Deepfake Detection System | Powered by AI & Computer Vision</p>
        <p class="text-cyan-400/90 text-sm mt-1 font-bold">Designed by Sidharth Bhangalia</p>
    </footer>

    <script>
        function showLoading() {
            document.getElementById('loading').classList.remove('hidden');
        }
        (function () {
            var fill = document.querySelector('.confidence-bar-fill');
            if (fill) {
                var pct = parseInt(fill.getAttribute('data-confidence') || '0', 10);
                requestAnimationFrame(function () {
                    fill.style.width = Math.min(100, Math.max(0, pct)) + '%';
                });
            }
        })();

        // —— Full-page live background ——
        (function () {
            const c = document.getElementById('bgCanvas');
            if (!c) return;
            const ctx = c.getContext('2d');
            let w = 0, h = 0, t = 0;
            const particles = [];

            function initParticles() {
                particles.length = 0;
                const n = Math.min(120, Math.floor((w * h) / 12000));
                for (let i = 0; i < n; i++) {
                    particles.push({
                        x: Math.random() * w,
                        y: Math.random() * h,
                        vx: (Math.random() - 0.5) * 1.2,
                        vy: (Math.random() - 0.5) * 1.2,
                        r: 1 + Math.random() * 2,
                        hue: 180 + Math.random() * 40
                    });
                }
            }

            function resize() {
                const dpr = window.devicePixelRatio || 1;
                w = window.innerWidth;
                h = window.innerHeight;
                c.width = Math.ceil(w * dpr);
                c.height = Math.ceil(h * dpr);
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                ctx.scale(dpr, dpr);
                initParticles();
            }
            resize();
            window.addEventListener('resize', resize);

            function drawBg() {
                t += 0.008;
                const cx1 = w * (0.3 + 0.2 * Math.sin(t));
                const cy1 = h * (0.2 + 0.15 * Math.cos(t * 0.7));
                const cx2 = w * (0.7 + 0.2 * Math.cos(t * 0.8));
                const cy2 = h * (0.8 + 0.1 * Math.sin(t * 0.6));
                const g = ctx.createLinearGradient(0, 0, w, h);
                g.addColorStop(0, '#0a0a18');
                g.addColorStop(0.25, '#0f0c29');
                g.addColorStop(0.5, '#1a0a2e');
                g.addColorStop(0.75, '#0d1525');
                g.addColorStop(1, '#0a0a18');
                ctx.fillStyle = g;
                ctx.fillRect(0, 0, w, h);

                const r1 = 200 + 80 * Math.sin(t);
                const gr1 = ctx.createRadialGradient(cx1, cy1, 0, cx1, cy1, r1);
                gr1.addColorStop(0, 'rgba(0, 212, 255, 0.25)');
                gr1.addColorStop(0.5, 'rgba(138, 43, 226, 0.15)');
                gr1.addColorStop(1, 'transparent');
                ctx.fillStyle = gr1;
                ctx.fillRect(0, 0, w, h);

                const r2 = 180 + 60 * Math.cos(t * 1.1);
                const gr2 = ctx.createRadialGradient(cx2, cy2, 0, cx2, cy2, r2);
                gr2.addColorStop(0, 'rgba(138, 43, 226, 0.2)');
                gr2.addColorStop(0.6, 'rgba(0, 212, 255, 0.08)');
                gr2.addColorStop(1, 'transparent');
                ctx.fillStyle = gr2;
                ctx.fillRect(0, 0, w, h);

                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.x < 0 || p.x > w) p.vx *= -1;
                    if (p.y < 0 || p.y > h) p.vy *= -1;
                    p.x = Math.max(0, Math.min(w, p.x));
                    p.y = Math.max(0, Math.min(h, p.y));
                    const alpha = 0.4 + 0.2 * Math.sin(t * 2 + i);
                    ctx.fillStyle = 'hsla(' + p.hue + ', 90%, 60%, ' + alpha + ')';
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                    ctx.fill();
                }
                requestAnimationFrame(drawBg);
            }
            drawBg();
        })();

        // —— Futuristic hero visual ——
        (function () {
            const canvas = document.getElementById('liveCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const size = 560;
            let t = 0;
            const nodes = [];
            const n = 60;
            for (let i = 0; i < n; i++) {
                const a = (i / n) * Math.PI * 2;
                nodes.push({
                    baseAngle: a,
                    radius: 80 + Math.random() * 140,
                    speed: 0.3 + Math.random() * 0.4,
                    r: 1.2 + Math.random() * 1.8,
                    hue: 185 + Math.random() * 50
                });
            }

            function resize() {
                const dpr = window.devicePixelRatio || 1;
                const rect = canvas.getBoundingClientRect();
                if (!rect.width || !rect.height) return;
                canvas.width = Math.round(rect.width * dpr);
                canvas.height = Math.round(rect.height * dpr);
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                ctx.scale(dpr * (rect.width / size), dpr * (rect.height / size));
            }
            resize();
            window.addEventListener('resize', resize);

            function draw() {
                ctx.clearRect(0, 0, size, size);
                t += 0.014;
                const cx = size / 2;
                const cy = size / 2 - 10;

                var i, j, x, y, d, alpha;

                var g = ctx.createRadialGradient(cx, cy, 0, cx, cy, size * 0.6);
                g.addColorStop(0, 'rgba(0, 212, 255, 0.08)');
                g.addColorStop(0.4, 'rgba(168, 85, 247, 0.05)');
                g.addColorStop(1, 'transparent');
                ctx.fillStyle = g;
                ctx.fillRect(0, 0, size, size);

                var pts = [];
                for (i = 0; i < nodes.length; i++) {
                    var nn = nodes[i];
                    var angle = nn.baseAngle + t * nn.speed;
                    x = cx + Math.cos(angle) * nn.radius;
                    y = cy + Math.sin(angle) * nn.radius * 0.85;
                    pts.push({ x: x, y: y, r: nn.r, hue: nn.hue });
                }

                for (i = 0; i < pts.length; i++) {
                    for (j = i + 1; j < pts.length; j++) {
                        d = Math.hypot(pts[j].x - pts[i].x, pts[j].y - pts[i].y);
                        if (d < 85) {
                            alpha = (1 - d / 85) * (0.12 + 0.08 * Math.sin(t * 2 + i + j));
                            ctx.strokeStyle = 'rgba(0, 212, 255, ' + alpha + ')';
                            ctx.lineWidth = 1;
                            ctx.beginPath();
                            ctx.moveTo(pts[i].x, pts[i].y);
                            ctx.lineTo(pts[j].x, pts[j].y);
                            ctx.stroke();
                        }
                    }
                }

                for (i = 0; i < pts.length; i++) {
                    var p = pts[i];
                    alpha = 0.7 + 0.3 * Math.sin(t * 2.5 + i);
                    ctx.fillStyle = 'hsla(' + p.hue + ', 90%, 70%, ' + alpha + ')';
                    ctx.shadowColor = 'rgba(0, 212, 255, 0.9)';
                    ctx.shadowBlur = 6;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.shadowBlur = 0;
                }

                var rings = [
                    { rx: 100, ry: 42, rot: t * 0.5, w: 1.5, a: 0.35 },
                    { rx: 145, ry: 62, rot: t * -0.35, w: 1, a: 0.25 },
                    { rx: 190, ry: 80, rot: t * 0.4, w: 1, a: 0.18 }
                ];
                for (i = 0; i < rings.length; i++) {
                    var r = rings[i];
                    ctx.save();
                    ctx.translate(cx, cy);
                    ctx.rotate(r.rot);
                    ctx.strokeStyle = 'rgba(0, 212, 255, ' + (r.a + 0.1 * Math.sin(t * 2 + i)) + ')';
                    ctx.lineWidth = r.w;
                    ctx.beginPath();
                    ctx.ellipse(0, 0, r.rx, r.ry, 0, 0, Math.PI * 2);
                    ctx.stroke();
                    ctx.restore();
                }

                var coreGlow = ctx.createRadialGradient(cx, cy, 0, cx, cy, 55);
                coreGlow.addColorStop(0, 'rgba(0, 230, 255, 0.5)');
                coreGlow.addColorStop(0.4, 'rgba(168, 85, 247, 0.2)');
                coreGlow.addColorStop(1, 'transparent');
                ctx.fillStyle = coreGlow;
                ctx.fillRect(0, 0, size, size);

                var pulse = 18 + 6 * Math.sin(t * 2);
                ctx.fillStyle = 'rgba(0, 212, 255, 0.9)';
                ctx.shadowColor = 'rgba(0, 212, 255, 1)';
                ctx.shadowBlur = 25;
                ctx.beginPath();
                ctx.arc(cx, cy, pulse, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;

                ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                ctx.beginPath();
                ctx.arc(cx, cy, pulse * 0.5, 0, Math.PI * 2);
                ctx.fill();

                ctx.font = '800 28px "Segoe UI", system-ui, sans-serif';
                ctx.textAlign = 'center';
                var title = 'AI SENTINEL';
                var glow = 0.75 + 0.2 * Math.sin(t * 2);
                ctx.shadowColor = 'rgba(0, 212, 255, 1)';
                ctx.shadowBlur = 20;
                ctx.fillStyle = 'rgba(0, 212, 255, ' + glow + ')';
                ctx.fillText(title, cx, cy + 165);
                ctx.shadowBlur = 0;

                ctx.font = '600 13px "Segoe UI", sans-serif';
                ctx.fillStyle = 'rgba(180, 220, 255, 0.85)';
                ctx.fillText('DEEPFAKE DETECTION · TRUST THE TRUTH', cx, cy + 188);
            }

            function loop() {
                draw();
                requestAnimationFrame(loop);
            }
            loop();
        })();
    </script>

</body>
</html>
